<?xml version="1.0" encoding="utf-8"?>
<Project  xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
	<UsingTask TaskName="EmCxx" AssemblyFile="..\..\Bin\EmscriptenTask.dll"/>
	<UsingTask TaskName="EmLink" AssemblyFile="..\..\Bin\EmscriptenTask.dll"/>
	<Target Name="Build">

        <PropertyGroup>
            <DoVerbose>true</DoVerbose>
            <Idir>Debug</Idir>
            <FileName>main</FileName>
            <FileExt>.o</FileExt>
            <OutDir>.</OutDir>
        </PropertyGroup>

		<EmCxx Sources="main.c" 
		      Verbose="$(DoVerbose)" 
			  ObjectFileName="$(Idir)\$(FileName)$(FileExt)"
		      />

		<EmLink Sources="$(Idir)\$(FileName)$(FileExt)"
		        Verbose="$(DoVerbose)"
		        OutputFile="$(OutDir)\C.wasm"/>

		<Exec Command="$(EMSDK)\upstream\bin\wavm.exe run C.wasm"/>
	</Target>
</Project>
